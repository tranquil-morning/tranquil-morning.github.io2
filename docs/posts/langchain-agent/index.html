<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jinwook Chang">
<meta name="dcterms.date" content="2023-06-08">

<title>Note of myself - LangChain Agent</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-D7YERGZ04Y"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-D7YERGZ04Y', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Note of myself</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tranquil-morning" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/tranquil-morning/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/zzang_jinuk/" rel="" target=""><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">LangChain Agent</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">AI</div>
                <div class="quarto-category">NLP</div>
                <div class="quarto-category">LangChain</div>
                <div class="quarto-category">Script</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jinwook Chang </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">June 8, 2023</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">June 8, 2023</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p><img src="../../others/prompt.png" class="img-fluid"></p>
<p><a href="https://www.deeplearning.ai/">DeepLearning.AI</a>에서 제공하는 LangChian for LLM Application Development 강좌를 요약한 글입니다.</p>
<p>목차 :</p>
<ul>
<li><a href="../langchain-prompt-template/">Prompt Template</a></li>
<li><a href="../langchain-output-parser/">Output Parser</a></li>
<li><a href="../langchain-memory/">Memory</a></li>
<li><a href="../langchain-chains/">Chain</a></li>
<li><a href="../langchain-qna">Q&amp;A</a></li>
<li><a href="../langchain-agent">Agent</a></li>
</ul>
<p>LangChain은 큰 언어 모델(Large Language Models, LLMs)을 사용하여 애플리케이션을 구축하는 개발자들을 돕기 위한 라이브러리입니다.<br>
이번 자료에서는 LangChain의 Agent 기능을 알아보도록 하겠습니다.<br>
Agent 기능은 LLM에 다른 외부 부가기능을 붙여 여러가지 기능을 부가적으로 수행하도록 합니다.</p>
<section id="install-and-load-libraries" class="level3">
<h3 class="anchored" data-anchor-id="install-and-load-libraries">Install and Load Libraries</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>openai.api_key <span class="op">=</span> <span class="st">"YOUR_API_KEY"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.agents.agent_toolkits <span class="im">import</span> create_python_agent</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.agents <span class="im">import</span> load_tools, initialize_agent</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.agents <span class="im">import</span> AgentType</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.tools.python.tool <span class="im">import</span> PythonREPLTool</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.python <span class="im">import</span> PythonREPL</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.chat_models <span class="im">import</span> ChatOpenAI</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>llm <span class="op">=</span> ChatOpenAI(temperature<span class="op">=</span><span class="dv">0</span>,openai_api_key <span class="op">=</span> key)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>tools <span class="op">=</span> load_tools([<span class="st">"llm-math"</span>,<span class="st">"wikipedia"</span>], llm<span class="op">=</span>llm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>agent<span class="op">=</span> initialize_agent(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    tools, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    llm, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    agent<span class="op">=</span>AgentType.CHAT_ZERO_SHOT_REACT_DESCRIPTION,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    handle_parsing_errors<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    verbose <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="calculator-agent" class="level3">
<h3 class="anchored" data-anchor-id="calculator-agent">Calculator Agent</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>agent(<span class="st">"300의 1/4는 몇인가요?"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Entering new AgentExecutor chain...[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mQuestion</span>: <span class="dv">300</span><span class="er">의</span> <span class="dv">1</span><span class="op">/</span><span class="dv">4</span><span class="er">는</span> 몇인가요?</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    Thought: I need to use a calculator to perform the arithmetic operation.</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    Action:</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action"</span>: <span class="st">"Calculator"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action_input"</span>: <span class="st">"300 * 1/4"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span><span class="er">m</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    Observation: [<span class="dv">36</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mAnswer</span>: <span class="fl">75.0</span>[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>    Thought:[<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mI</span> have the answer to the question.</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>    Final Answer: <span class="dv">300</span><span class="er">의</span> <span class="dv">1</span><span class="op">/</span><span class="dv">4</span><span class="er">는</span> <span class="dv">75</span><span class="er">입니다</span>.[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Finished chain.[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>    {<span class="st">'input'</span>: <span class="st">'300의 1/4는 몇인가요?'</span>, <span class="st">'output'</span>: <span class="st">'300의 1/4는 75입니다.'</span>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="wikipedia-agent" class="level3">
<h3 class="anchored" data-anchor-id="wikipedia-agent">Wikipedia Agent</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>question <span class="op">=</span> <span class="st">"박지성이 맨유에 뛰었을 때, 맨유의 감독은 누구였나요?"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> agent(question) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>박지성의 위키피디아 페이지에 접속하여 맨유의 입단 년도를 알아낸 후, 해당 년도의 맨유의 페이지에서 감독이 누구인가를 알아보는 모습을 알 수 있습니다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Entering new AgentExecutor chain...[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mThought</span>: I need to search <span class="cf">for</span> the year when Park Ji<span class="op">-</span>sung joined Manchester United to find out who the manager was at that time.</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    Action:</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action"</span>: <span class="st">"Wikipedia"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action_input"</span>: <span class="st">"Park Ji-sung Manchester United"</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span><span class="er">m</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    Observation: [<span class="dv">33</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mPage</span>: Park Ji<span class="op">-</span>sung</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    Summary: Park Ji<span class="op">-</span>sung (Korean: 박지성<span class="op">;</span> Hanja: 朴智星<span class="op">;</span> Korean pronunciation: [pak̚.t͈ɕi.sʌŋ]<span class="op">;</span> born <span class="dv">30</span> March <span class="dv">1981</span>) <span class="kw">is</span> a South Korean former professional footballer who played <span class="im">as</span> a midfielder. Born <span class="kw">in</span> the South Korean capital Seoul, Park <span class="kw">is</span> one of the most successful Asian players <span class="kw">in</span> football history, having won <span class="dv">19</span> trophies <span class="kw">in</span> his career. He <span class="kw">is</span> the first Asian footballer to have won the UEFA Champions League, to play <span class="kw">in</span> a UEFA Champions League final, <span class="im">as</span> well <span class="im">as</span> the first Asian to have won the FIFA Club World Cup. Park was able to play anywhere across the midfield <span class="kw">and</span> was noted <span class="cf">for</span> his exceptional fitness level, discipline, work ethic <span class="kw">and</span> off<span class="op">-</span>the<span class="op">-</span>ball movement. His remarkable endurance levels earned him the nickname <span class="st">"Three-Lung"</span> Park.Park began his football career <span class="kw">in</span> his native South Korea <span class="kw">and</span> played <span class="cf">for</span> the Myongji University team before moving to Japan to play <span class="cf">for</span> Kyoto Purple Sanga. After Park<span class="st">'s national team manager Guus Hiddink moved back to the Netherlands to manage PSV Eindhoven, Park followed him to the Dutch side a year later. After PSV reached the semi-finals of the 2004–05 UEFA Champions League, Park'</span>s talents were recognised by Manchester United manager Sir Alex Ferguson <span class="kw">and</span> he signed Park <span class="cf">for</span> a fee of around £<span class="dv">4</span> million <span class="kw">in</span> July <span class="fl">2005.</span> In his time at United, his honours included four Premier League titles, the <span class="dv">2007</span>–<span class="dv">0</span><span class="er">8</span> UEFA Champions League, <span class="kw">and</span> the <span class="dv">2008</span> FIFA Club World Cup. He moved to Queens Park Rangers <span class="kw">in</span> July <span class="dv">2012</span> after suffering a reduction <span class="kw">in</span> his number of appearances <span class="cf">for</span> Manchester United the previous season. However, an injury<span class="op">-</span>interrupted season <span class="cf">with</span> QPR, combined <span class="cf">with</span> the club<span class="st">'s relegation, led to Park rejoining PSV on loan for the 2013–14 season.</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="er">    As a member of the South Korea national team, Park won 100 caps and scored 13 goals. He was a member of the team that finished fourth at the 2002 FIFA World Cup, and also represented his nation at the 2006 FIFA World Cup and the 2010 FIFA World Cup. At the World Cup, he was named man of the match four times, the most of any Asian player, and is currently South Korea's joint all-time leading World Cup goalscorer with three goals alongside Ahn Jung-hwan and Son Heung-min, having scored in three consecutive tournaments.</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    Page: <span class="dv">2011</span> MLS All<span class="op">-</span>Star Game</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    Summary: The <span class="dv">2011</span> Major League Soccer All<span class="op">-</span>Star Game, held on July <span class="dv">27</span>, <span class="dv">2011</span>, was the <span class="dv">16</span><span class="er">th</span> annual Major League Soccer All<span class="op">-</span>Star Game, a soccer match involving <span class="bu">all</span><span class="op">-</span>stars <span class="im">from</span> Major League Soccer. The MLS All<span class="op">-</span>Stars faced Manchester United of the English Premier League <span class="cf">for</span> the second year running <span class="kw">in</span> the eighth MLS All<span class="op">-</span>Star Game to feature international opposition. Manchester United won the game <span class="dv">4</span>–<span class="dv">0</span> <span class="cf">with</span> goals <span class="im">from</span> Anderson, Park Ji<span class="op">-</span>Sung, Dimitar Berbatov <span class="kw">and</span> Danny Welbeck.</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    The game was played at the Red Bull Arena <span class="kw">in</span> Harrison, New Jersey, making it the first MLS All<span class="op">-</span>Star Game to be played <span class="kw">in</span> the New York metropolitan area since <span class="fl">1997.</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    Page: <span class="dv">2005</span>–<span class="dv">0</span><span class="er">6</span> Manchester United F.C. season</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>    Summary: The <span class="dv">2005</span>–<span class="dv">0</span><span class="er">6</span> season was Manchester United<span class="st">'s 14th season in the Premier League, and their 31st consecutive season in the top division of English football.After having finished in third place in both of the previous two seasons, the Red Devils improved slightly to finish the 2005–06 season in second place, despite finishing 8 points off the lead.</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a><span class="er">    However, despite the improvement in their league form, United's European form took a massive blow, with the club failing to reach the knockout stage of the UEFA Champions League for the first time since 1994–95. The club fared better in the FA Cup, reaching the Fifth Round, but their real success came in the League Cup, in which they beat Wigan Athletic 4–0 in the final. United became the first club in Premier League history to score 1,000 goals, a milestone reached on 29 October in the 4–1 defeat to Middlesbrough at the Riverside, with Cristiano Ronaldo scoring the goal.The 2005–06 season also saw the departure of club captain Roy Keane, who had been at Old Trafford since 1993. Keane played his la[0m</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>    Thought:[<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mAccording</span> to the Wikipedia page, Park Ji<span class="op">-</span>sung joined Manchester United <span class="kw">in</span> July <span class="dv">2005</span> <span class="cf">for</span> a fee of around £<span class="dv">4</span> million. Therefore, I need to find out who the manager of Manchester United was <span class="kw">in</span> July <span class="fl">2005.</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    Action:</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action"</span>: <span class="st">"Wikipedia"</span>,</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action_input"</span>: <span class="st">"Manchester United in 2005"</span></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span><span class="er">m</span></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>    Observation: [<span class="dv">33</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mPage</span>: <span class="dv">2005</span>–<span class="dv">0</span><span class="er">6</span> Manchester United F.C. season</span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>    Summary: The <span class="dv">2005</span>–<span class="dv">0</span><span class="er">6</span> season was Manchester United<span class="st">'s 14th season in the Premier League, and their 31st consecutive season in the top division of English football.After having finished in third place in both of the previous two seasons, the Red Devils improved slightly to finish the 2005–06 season in second place, despite finishing 8 points off the lead.</span></span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a><span class="er">    However, despite the improvement in their league form, United's European form took a massive blow, with the club failing to reach the knockout stage of the UEFA Champions League for the first time since 1994–95. The club fared better in the FA Cup, reaching the Fifth Round, but their real success came in the League Cup, in which they beat Wigan Athletic 4–0 in the final. United became the first club in Premier League history to score 1,000 goals, a milestone reached on 29 October in the 4–1 defeat to Middlesbrough at the Riverside, with Cristiano Ronaldo scoring the goal.The 2005–06 season also saw the departure of club captain Roy Keane, who had been at Old Trafford since 1993. Keane played his last game for the club on 18 September 2005 in a goalless draw with Liverpool, but was forced to withdraw from the match only a couple of minutes before full-time. It was later revealed that Keane had picked up a foot injury and he eventually left the club for his boyhood team Celtic on 18 November 2005. Keane was subsequently replaced as captain by his deputy, Gary Neville. On 25 November 2005, just seven days after Keane left the club, United fans were plunged into mourning by the death of legendary former player George Best, who died at age 59.</span></span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>    Page: Glazer ownership of Manchester United</span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>    Summary: Manchester United Football Club <span class="kw">is</span> an English football club based <span class="kw">in</span> Old Trafford, Greater Manchester. The club was formed <span class="im">as</span> Newton Heath LYR Football Club, the works team of the Lancashire <span class="kw">and</span> Yorkshire Railway depot <span class="kw">in</span> Newton Heath, <span class="kw">in</span> <span class="fl">1878.</span> The club split <span class="im">from</span> the railway company <span class="kw">in</span> <span class="dv">1892</span> <span class="kw">and</span> remained under private ownership <span class="cf">for</span> almost <span class="dv">100</span> years, changing its name to Manchester United after being saved <span class="im">from</span> bankruptcy <span class="kw">in</span> <span class="fl">1902.</span> The club was the subject of takeover bids <span class="im">from</span> media tycoon Robert Maxwell <span class="kw">in</span> <span class="dv">1984</span> <span class="kw">and</span> <span class="bu">property</span> trader Michael Knighton <span class="kw">in</span> <span class="dv">1989</span>, before going public <span class="kw">in</span> <span class="dv">1991</span><span class="op">;</span> they received another takeover bid <span class="im">from</span> Rupert Murdoch<span class="st">'s BSkyB corporation in 1998 before Malcolm Glazer'</span>s stake was announced <span class="kw">in</span> September <span class="fl">2003.</span></span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>    By the end of <span class="dv">2003</span>, Glazer had increased his shareholding <span class="im">from</span> <span class="fl">3.17</span><span class="op">%</span> to around <span class="dv">15</span><span class="op">%</span>, which he almost doubled <span class="kw">in</span> the year up to October <span class="fl">2004.</span> His acquisition of John Magnier <span class="kw">and</span> J. P. McManus<span class="st">'s 28.7</span><span class="sc">% s</span><span class="st">take in May 2005 pushed his own up to around 57%, well over the 30% threshold that would force him to launch a takeover bid. A few days later, he took control of 75</span><span class="sc">% o</span><span class="st">f the club'</span>s shares, allowing him to delist the company <span class="im">from</span> the London Stock Exchange, <span class="kw">and</span> within a month, the Glazers took <span class="dv">98</span><span class="op">%</span> ownership of the club via their Red Football parent company, forcing a squeeze<span class="op">-</span>out of the remaining <span class="dv">2</span><span class="op">%</span>. The final purchase price of the club totalled almost £<span class="dv">800</span> million.</span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>    Most of the capital used by Glazer to purchase Manchester United came <span class="kw">in</span> the form of loans, the majority of which were secured against the club<span class="st">'s assets, incurring interest payments of over £60 million per annum. The remainder came in the form of PIK loans (payment in kind loans), which were later sold to hedge funds. Manchester United was not liable for the PIKs, which were held by Red Football Joint Venture and were secured on that company'</span>s shares <span class="kw">in</span> Red Football (<span class="kw">and</span> thus the club). The interest on the PIKs rolled up at <span class="fl">14.25</span><span class="op">%</span> per annum. Despite this, the Glazers did <span class="kw">not</span> pay down <span class="bu">any</span> of the PIK loans <span class="kw">in</span> the first five years they owned the club. In January <span class="dv">2010</span>, the club carried out a successful £<span class="dv">500</span> million bond issue, <span class="kw">and</span> by March <span class="dv">2010</span>, the PIKs stood at around £<span class="dv">207</span> million. The PIKs were eventually paid off <span class="kw">in</span> November <span class="dv">2010</span> by unspecified means. In August <span class="dv">2012</span>, <span class="im">as</span> p[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb8-43"><a href="#cb8-43" aria-hidden="true" tabindex="-1"></a>    Thought:[<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mAccording</span> to the Wikipedia page, Sir Alex Ferguson was the manager of Manchester United <span class="kw">in</span> July <span class="dv">2005</span> when Park Ji<span class="op">-</span>sung joined the team.</span>
<span id="cb8-44"><a href="#cb8-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-45"><a href="#cb8-45" aria-hidden="true" tabindex="-1"></a>    Final Answer: Sir Alex Ferguson was the manager of Manchester United when Park Ji<span class="op">-</span>sung joined the team <span class="kw">in</span> July <span class="fl">2005.</span>[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb8-46"><a href="#cb8-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb8-47"><a href="#cb8-47" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Finished chain.[<span class="dv">0</span><span class="er">m</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="python-repl-agent" class="level3">
<h3 class="anchored" data-anchor-id="python-repl-agent">Python REPL Agent</h3>
<p>Python REPL 자체를 Agent로 이용할 수 있습니다.<br>
아래는 고객 명을 성 / 이름 순으로 나열하는 예제입니다.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>agent <span class="op">=</span> create_python_agent(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    llm,</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    tool<span class="op">=</span>PythonREPLTool(),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    verbose<span class="op">=</span><span class="va">True</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>customer_list <span class="op">=</span> [[<span class="st">"Harrison"</span>, <span class="st">"Chase"</span>], </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Lang"</span>, <span class="st">"Chain"</span>],</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Dolly"</span>, <span class="st">"Too"</span>],</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Elle"</span>, <span class="st">"Elem"</span>], </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Geoff"</span>,<span class="st">"Fusion"</span>], </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Trance"</span>,<span class="st">"Former"</span>],</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>                 [<span class="st">"Jen"</span>,<span class="st">"Ayai"</span>]</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>                ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>agent.run(<span class="ss">f"""Sort these customers by </span><span class="ch">\</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ss">last name and then first name </span><span class="ch">\</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ss">and print the output: </span><span class="sc">{</span>customer_list<span class="sc">}</span><span class="ss">"""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Entering new AgentExecutor chain...[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mI</span> can use the <span class="bu">sorted</span>() function to sort the <span class="bu">list</span> of customers by last name <span class="kw">and</span> then first name. I will need to provide a key function to <span class="bu">sorted</span>() that returns a <span class="bu">tuple</span> of the last name <span class="kw">and</span> first name <span class="kw">in</span> that order.</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    Action: Python REPL</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    Action Input:</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    customers <span class="op">=</span> [[<span class="st">'Harrison'</span>, <span class="st">'Chase'</span>], [<span class="st">'Lang'</span>, <span class="st">'Chain'</span>], [<span class="st">'Dolly'</span>, <span class="st">'Too'</span>], [<span class="st">'Elle'</span>, <span class="st">'Elem'</span>], [<span class="st">'Geoff'</span>, <span class="st">'Fusion'</span>], [<span class="st">'Trance'</span>, <span class="st">'Former'</span>], [<span class="st">'Jen'</span>, <span class="st">'Ayai'</span>]]</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    sorted_customers <span class="op">=</span> <span class="bu">sorted</span>(customers, key<span class="op">=</span><span class="kw">lambda</span> x: (x[<span class="dv">1</span>], x[<span class="dv">0</span>]))</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> customer <span class="kw">in</span> sorted_customers:</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(customer)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    ```[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    Observation: [<span class="dv">36</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">m</span>[<span class="st">'Jen'</span>, <span class="st">'Ayai'</span>]</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Lang'</span>, <span class="st">'Chain'</span>]</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Harrison'</span>, <span class="st">'Chase'</span>]</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Elle'</span>, <span class="st">'Elem'</span>]</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Trance'</span>, <span class="st">'Former'</span>]</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Geoff'</span>, <span class="st">'Fusion'</span>]</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    [<span class="st">'Dolly'</span>, <span class="st">'Too'</span>]</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span><span class="er">m</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    Thought:[<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mThe</span> customers have been <span class="bu">sorted</span> by last name <span class="kw">and</span> then first name, <span class="kw">and</span> the output has been printed. </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    Final Answer: [[<span class="st">'Jen'</span>, <span class="st">'Ayai'</span>], [<span class="st">'Lang'</span>, <span class="st">'Chain'</span>], [<span class="st">'Harrison'</span>, <span class="st">'Chase'</span>], [<span class="st">'Elle'</span>, <span class="st">'Elem'</span>], [<span class="st">'Trance'</span>, <span class="st">'Former'</span>], [<span class="st">'Geoff'</span>, <span class="st">'Fusion'</span>], [<span class="st">'Dolly'</span>, <span class="st">'Too'</span>]][<span class="dv">0</span><span class="er">m</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Finished chain.[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"[['Jen', 'Ayai'], ['Lang', 'Chain'], ['Harrison', 'Chase'], ['Elle', 'Elem'], ['Trance', 'Former'], ['Geoff', 'Fusion'], ['Dolly', 'Too']]"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="tool-만들기" class="level3">
<h3 class="anchored" data-anchor-id="tool-만들기">Tool 만들기</h3>
<p>기존에 정의된 Tool 외에 새로운 Tool을 정의하는 것도 가능합니다.<br>
다음은 오늘의 날짜를 불러오는 Tool의 예시입니다.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!pip install DateTime</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> langchain.agents <span class="im">import</span> tool</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="at">@tool</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> time(text: <span class="bu">str</span>) <span class="op">-&gt;</span> <span class="bu">str</span>:</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""Returns todays date, use this for any </span><span class="ch">\</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">    questions related to knowing todays date. </span><span class="ch">\</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">    The input should always be an empty string, </span><span class="ch">\</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">    and this function will always return todays </span><span class="ch">\</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">    date - any date mathmatics should occur </span><span class="ch">\</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">    outside this function."""</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">str</span>(date.today())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>agent<span class="op">=</span> initialize_agent(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    tools <span class="op">+</span> [time], </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    llm, </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    agent<span class="op">=</span>AgentType.CHAT_ZERO_SHOT_REACT_DESCRIPTION,</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    handle_parsing_errors<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    verbose <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span>:</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> agent(<span class="st">"whats the date today?"</span>) </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="cf">except</span>: </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"exception on external access"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Entering new AgentExecutor chain...[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mThought</span>: I need to use the `time` tool to get today<span class="st">'s date.</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="er">    Action:</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action"</span>: <span class="st">"time"</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"action_input"</span>: <span class="st">""</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    ```</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">0</span><span class="er">m</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    Observation: [<span class="dv">38</span><span class="op">;</span><span class="dv">5</span><span class="op">;</span><span class="dv">200</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">m2023</span><span class="op">-</span><span class="dv">0</span><span class="er">6</span><span class="op">-</span><span class="dv">0</span><span class="er">4</span>[<span class="dv">0</span><span class="er">m</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    Thought:[<span class="dv">32</span><span class="op">;</span><span class="dv">1</span><span class="er">m</span>[<span class="dv">1</span><span class="op">;</span><span class="dv">3</span><span class="er">mI</span> have successfully retrieved today<span class="st">'s date using the `time` tool.</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="er">    Final Answer: Today's date is 2023-06-04.[0m</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    [<span class="dv">1</span><span class="er">m</span><span class="op">&gt;</span> Finished chain.[<span class="dv">0</span><span class="er">m</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>